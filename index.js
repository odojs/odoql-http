// Generated by CoffeeScript 1.9.3
var request;

request = require('superagent');

module.exports = {
  params: {
    http: function(exe, params) {
      var getsource;
      getsource = exe.build(params.__s);
      return function(cb) {
        return getsource(function(err, source) {
          var parts, query, url;
          if (err != null) {
            return cb(err);
          }
          parts = source.split('?', 2);
          url = parts[0];
          query = parts[1] != null ? parts[1] : '';
          query = query.split('#')[0];
          return request.get(url).query(query).end(function(err, res) {
            if (err != null) {
              return cb(err);
            }
            if (!res.ok) {
              return cb(new Error(res.text));
            }
            return cb(null, res.text);
          });
        });
      };
    }
  }
};
